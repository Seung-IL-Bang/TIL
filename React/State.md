# React State에 관하여

리액트는 앱이 처음 실행될 때 모든 컴포넌트들이 해석된 이후에 브라우저에 렌더링 된다. 만약 'state(상태)' 를 도입하지 않고 js 로직과 이벤트를 통해 어떤 변수의 데이터 값을 변경한다면, 그 상황에서 이벤트가 발생하더라도 화면에 데이터 값의 변화를 불러 일으킬 수 없다. 왜냐하면 js 로직에 의한 일반 변수의 변화는 모든 컴포넌트들의 재평가(새로운 렌더링) 과정을 유발하지 않기 때문이다.  따라서 `state` 를 사용하지 않으면 이미 렌더링된 화면에 영향을 줄 수 없는 것이다. 컴포넌트 안의 함수에 변수가 있는데, 그 변수가 변한다면 무시해도 좋다.

<br>

React에게 어떤 값의 변화를 반영한 다음 컴포넌트를 다시 렌더링 하라고 하려면 library를 import 해와야 한다. 우선 default 함수 'React' 를 가져와야하고, 일반 함수 { useState } 를 가져와야 한다. 'useState'를 사용하여 값의 상태를 재정의하여 브라우저에 변화된 화면을 띄울 수 있게된다. 현대 리액트 프로젝트 셋업에선 'React'는 기본적으로 생략 가능하다.

```Javascript
import React, { useState } from 'react';
```

useState => 리액트 훅(React Hook) 중 하나이다. use라는 이름이 붙은 것들은 훅들이다. 훅들은 반드시 컴포넌트 함수 안에서만 호출돼야 한다! 컴포넌트 안의 정의된 중첩된 함수 내부에서도 안되고 컴포넌트 외부도 안된다. 반드시 컴포넌트 바로 안에서만 호출되어야 한다.

<br>

```javascript
const [title, setTitle] = useState(props.title);
```



useState 인수로 특정 변수의 초기값을 넣어 설정해줄 수 있다. 그러면 js 문법의 비구조화 할당을 통해 두 개의 값을 할당 받을 수 있는데, 첫 번째 값은 초기 설정한 값의 변수 그 자체이고, 두 번째 값은 해당 변수의 값을 변경시킬 수 있는 세터(setter) 메소드를 할당 받는다. 변수명은 자유지만 세터메소드는 변수명에 카멜케이스 컨벤션을 맞춰준다.



```javascript
setTitle(new title);
```

나중에 setTitle 세터로 값을 변경하게되면 변화된 값이 반영되어 컴포넌트가 다시 렌더링 되고 해당 화면이 브라우저에 새로 띄워진다.



useState를 통해서만 상태변화를 반영할 수 있는 이유

: 일반 변수에 새로운 값을 할당해주는 것은 반영이 안된다. useState를 써야지만 업데이트가 되는데, 그 이유는 useState로 부터 할당받은 변수는 리액트에 의해 관리되는 메모리에 저장되어 있기 때문이다. 즉 리액트에 의해 관리되는 메모리에 저장된 변수이기 때문에 해당 변수에 업데이트가 일어나게 되면(세터 함수 호출) 리액트는 이를 인지하여 컴포넌트도 다시 업데이트하여 렌더링하게 되는 것이다.



이때 중요한 사실은 업데이트가 일어난 해당 useState를 가진 컴포넌트만 새로 렌더링되는 것이다. 즉, 모든 컴포넌트를 전부 다시 렌더링 하는 것이 아니라 변화가 감지된 컴포넌트에서만 재렌더링되는 것이다.



useState를 사용한 컴포넌트가 여러 번 재생성될 때마다 각각의 컴포넌트들은 각자 고유의 state를 생성한다.