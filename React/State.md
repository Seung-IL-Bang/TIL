# React State에 관하여

### State 사용하는 이유

리액트는 앱이 처음 실행될 때 모든 컴포넌트들이 해석된 이후에 브라우저에 렌더링 된다. 만약 `state(상태)` 를 사용하지 않고 js 변수`(var, let)`를 사용하여  데이터 값을 변경한다면, 이벤트가 발생하더라도 화면에 데이터 값의 변화를 불러 일으킬 수 없다. **왜냐하면 js의 일반 변수의 변화는 모든 컴포넌트들의 재평가(re-evaluate; 새로운 렌더링) 과정을 유발하지 않기 때문이다.** 따라서 `state(상태)` 를 사용하지 않으면 이미 렌더링된 화면에 영향을 줄 수 없는 것이다.

<br>

### useState 사용하기

`State`를 사용하려면 `react` 라이브러리에서 두 가지 함수를 import 해와야 한다. 우선 default 함수인 `React` 를 가져와야하고, 일반 함수 `{ useState }` 를 가져와야 한다.

```Javascript
import React, { useState } from 'react';
```

> Tip.
>
> 현대 리액트 프로젝트 셋업에선 'React'는 기본적으로 생략 가능하다. 따라서 별도로 import 해오지 않아도 된다.


`useState` 는 리액트 훅(React Hook) 중 하나이다. use라는 이름이 붙은 것들은 훅들이다. 훅들은 반드시 컴포넌트 함수 안에서만 호출돼야 한다! 컴포넌트 안의 정의된 중첩된 함수 내부에서도 안되고 컴포넌트 외부도 안된다. 반드시 컴포넌트 바로 안에서만 호출되어야 한다.

<br>

### useState 사용법

```javascript
const [title, setTitle] = useState(props.title);
```

useState 인수로 특정 변수의 초기값을 넣어 설정해줄 수 있다. useState는 배열을 반환하는데, 첫 번째 원소는 초기 설정값을 할당받은 변수이고, 두 번째 원소는 해당 변수의 값을 변경할 수 있는 세터(setter) 메소드이다. 반환값을 비구조화 할당을 통해 배열로 할당 받을 수 있다. 변수명은 자유지만 세터메소드는 변수명에 카멜케이스 컨벤션을 맞춰준다.

```javascript
setTitle(new title);
```

나중에 setTitle 세터로 값을 변경하게되면 변화된 값이 반영되어 컴포넌트가 다시 렌더링 되고 해당 화면이 브라우저에 새로 띄워진다.

<br>

### 💡 useState를 통해서만 상태변화를 반영할 수 있는 이유

일반 변수에 새로운 값을 할당해주는 것은 화면에 반영이 안된다. useState를 써야지만 업데이트가 되는데, 그 이유는 **useState로 부터 할당받은 변수는 리액트에 의해 관리되는 메모리에 저장되어 있기 때문이다.** 즉 리액트에 의해 관리되는 메모리에 저장된 변수이기 때문에 해당 변수에 업데이트가 일어나게 되면(세터 함수 호출) 리액트는 이를 인지하여 컴포넌트를 재평가하여 렌더링하게 되는 것이다.

<br>

### ✅ 체크포인트
- **이때 중요한 사실은 업데이트가 일어난 해당 useState를 가진 컴포넌트만 새로 렌더링되는 것이다. 즉, 모든 컴포넌트를 전부 다시 렌더링 하는 것이 아니라 변화가 감지된 컴포넌트에서만 재렌더링되는 것이다.**

- useState를 사용한 컴포넌트가 여러 번 재생성될 때마다 각각의 컴포넌트들은 각자 고유의 state를 생성한다. 쉽게 말해, 상태 변수를 사용하고 싶은만큼 자유롭게 선언할 수 있다.